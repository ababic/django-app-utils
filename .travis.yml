language: python
cache: pip
matrix:
  include:
  - env: TOXENV=py34-dj111
    sudo: false
    dist: trusty
    python: 3.4
  - env: TOXENV=py35-dj111
    sudo: false
    dist: trusty
    python: 3.5
  - env: TOXENV=py36-dj111
    sudo: false
    dist: trusty
    python: 3.6
  - env: TOXENV=py37-dj2
    sudo: true
    dist: xenial
    python: 3.7
  - env: TOXENV=py37-dj21
    sudo: true
    dist: xenial
    python: 3.7
install:
- pip install tox codecov
script:
- tox
after_success:
- codecov --token=d1c52f52-bbc0-4eeb-b7dd-e4ac89504b93
deploy:
  provider: pypi
  user: ababic
  distributions: sdist bdist_wheel
  password:
    secure: sGedAt1h+FSeVhhOfb7Upt/mWdnm0QBDolHk5OJ/aZeGTnrCvWpo37oP2JuKW5gRgA0z7mPMBUkUFtiadWSunjs5xw5wkdddLIEx3tpS7Zt4BZXW/cEniEBHXhY5tLPfOAPVj0QC5RPTAH0BYDl9/QnbW3KjhtTAtKORc5c0a47v6TSwX7vvqrhvfWR5TTc+KE8qx+l5tVhnP4ddOPZWu3OuCfMeXcYikpNwNoBJYhkr+ktLM83HsIwp6w81TNq/ppvhpcpLc2Rom4NXVisnKZl23sRhyvdvAooGkrTXXU5uxC5LbYuXEgHdJgQ4RdIJ73/fwaIhUVeBbrSd+ieCHbHW1wLzVnf/znMFgIgJ1xw0iEeJw4qEbh6JEmQnfm7+QdpNJ7pzfZq7sGkwp/GxmWqKFB+wUKgkkGQuxRXVQvdEs+Y7pPbWmRHmBhdx7hosOh1IznMAMtUtcTnKQ8vtqU1RV5+9eOa2tq1TwWBihkvUis61Ft8XOlxSeSPirDrsnmcga4KsvKqKU8Unl8gQ9TO0sdEyoTOhUwfk8zDtNcj0vO6fuf4bkZ8mXybtz0iqVX1XTBM+RasxolkK3efoBTUlRDB+lAxM0RqpvgogH2x+VCuJbUXx4utfh2QlJNNtLlzOYsMsCC6FB69czfNLEj/MdtdRuGaAHRwz8MjjYus=
  on:
    tags: true
    branch: master
    repo: ababic/django-cogwheels
    condition: "$TOXENV = py37-dj21"
