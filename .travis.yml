language: python
cache: pip
matrix:
  include:
  - env: TOXENV=py34-dj111
    sudo: false
    dist: trusty
    python: 3.4
  - env: TOXENV=py35-dj111
    sudo: false
    dist: trusty
    python: 3.5
  - env: TOXENV=py36-dj111
    sudo: false
    dist: trusty
    python: 3.6
  - env: TOXENV=py37-dj2
    sudo: true
    dist: xenial
    python: 3.7
  - env: TOXENV=py37-dj21
    sudo: true
    dist: xenial
    python: 3.7
install:
- pip install tox codecov
script:
- tox
after_success:
- codecov --token=d1c52f52-bbc0-4eeb-b7dd-e4ac89504b93
deploy:
  provider: pypi
  user: ababic
  distributions: sdist bdist_wheel
  password:
    secure: "Q9u+d8+BIKbz2VbTTCf8piLUtOembCEeAK3X5IHq1jVgW4DQqO6PNRL9GIQVYKhbuT7e++BaJMfNYN4lyIxCP9Tj62jR+wRAGqdPOF/sEyOUGzLQp6vNOYuM07ptGxwYzCqdAEWd1tbPJgLFT/xLAsIp5njrBkhwQcsEdl4tRNjoV1CSPEv03f/+G4E3lDjuM/3HGQ0lXt17Yh7qmmzTyB/DOZrZHeb2n5P2wo0kHRVyVxbTOCsiwOOeWgw2qQb0YrLdQHglfg6ZMEhhZzIcvDaoVklANmz6gVYLpuXjS/7txaQh4yZoI3q53vq6pvmjsWV0jNksV8ybuUO1fgVIiAWLFzj1WJ4h+QTAiMVUFYkF5iUt77OXY7HYq0TPMWT67Nvi2vfs0UvVQVy4GtH4LcIyluAouLG8wc1Fk+7LBC/BazDVtZiQhNT+ktFc3wZlowTjcr9y/iBNsOivu/erkGH7mkM3mTi3qGGDnvxf7cu4Tm4c1sSVDcDlMOqKDw1vSEjDAZtW4rWuvDRB6EV8+ahlzeiRXEeLTxtkNuYo57+fa5pf8wN4pubnd+dJtjN4vCXw8yNH70ehiBTp+QzHO7MwfAEpGznLJ2MIxhCJ7XRVz/nn+aU0scma+swGFrsMelpSLjjCCzOxmbhxopqTAoTPDw6XoN3Yv0D3MIBNkCQ="
  on:
    tags: true
    branch: master
    repo: ababic/django-cogwheels
    condition: "$TOXENV = py37-dj21"
